<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
<title>SWI-Prolog Source Documentation</title>
<style type="text/css">

/* Style sheet for SWI-Prolog latex2html
*/

dd.defbody
{ margin-bottom: 1em;
}

dt.pubdef
{ background-color: #c5e1ff;
}

dt.multidef
{ background-color: #c8ffc7;
}

.bib dd
{ margin-bottom: 1em;
}

.bib dt
{ float: left;
margin-right: 1.3ex;
}

pre.code
{ margin-left: 1.5em;
margin-right: 1.5em;
border: 1px dotted;
padding-top: 5px;
padding-left: 5px;
padding-bottom: 5px;
background-color: #f8f8f8;
}

div.navigate
{ text-align: center;
background-color: #f0f0f0;
border: 1px dotted;
padding: 5px;
}

div.title
{ text-align: center;
padding-bottom: 1em;
font-size: 200%;
font-weight: bold;
}

div.author
{ text-align: center;
font-style: italic;
}

div.abstract
{ margin-top: 2em;
background-color: #f0f0f0;
border: 1px dotted;
padding: 5px;
margin-left: 10%; margin-right:10%;
}

div.abstract-title
{ text-align: center;
padding: 5px;
font-size: 120%;
font-weight: bold;
}

div.toc-h1
{ font-size: 200%;
font-weight: bold;
}

div.toc-h2
{ font-size: 120%;
font-weight: bold;
margin-left: 2em;
}

div.toc-h3
{ font-size: 100%;
font-weight: bold;
margin-left: 4em;
}

div.toc-h4
{ font-size: 100%;
margin-left: 6em;
}

span.sec-nr
{
}

span.sec-title
{
}

span.pred-ext
{ font-weight: bold;
}

span.pred-tag
{ float: right;
padding-top: 0.2em;
font-size: 80%;
font-style: italic;
color: #202020;
}

/* Footnotes */

sup.fn { color: blue; text-decoration: underline; }
span.fn-text { display: none; }
sup.fn span {display: none;}
sup:hover span
{ display: block !important;
position: absolute; top: auto; left: auto; width: 80%;
color: #000; background: white;
border: 2px solid;
padding: 5px; margin: 10px; z-index: 100;
font-size: smaller;
}

/* Lists */

dl.latex
{ margin-top: 1ex;
margin-bottom: 0.5ex;
}

dl.latex dl.latex dd.defbody
{ margin-bottom: 0.5ex;
}

/* PlDoc Tags */

dl.tags
{ font-size: 90%;
margin-left: 5ex;
margin-top: 1ex;
margin-bottom: 0.5ex;
}

dl.tags dt
{ margin-left: 0pt;
font-weight: bold;
}

dl.tags dd
{ margin-left: 3ex;
}

td.param
{ font-style: italic;
font-weight: bold;
}

/* Index */

dt.index-sep
{ font-weight: bold;
font-size: +1;
margin-top: 1ex;
}
</style>
</head>
<body bgcolor="white"> 
<div class="title">SWI-Prolog Source Documentation</div>
<div class="author">Jan Wielemaker <br>
VU University, Amsterdam <br>
The Netherlands <br>
E-mail: <a class="url" href="mailto:J.Wielemaker@vu.nl">J.Wielemaker@vu.nl</a></div>
<div class="abstract">
<div class="abstract-title">Abstract</div> This document presents PlDoc, 
the SWI-Prolog source-code documentation infrastructure. PlDoc is 
loosely based on JavaDoc, using structured comments to mix documentation 
with source-code. SWI-Prolog's PlDoc is entirely written in Prolog and 
well integrated into the environment. It can create HTML+CSS and LaTeX 
documentation files as well as act as a web-server for the loaded 
project during program development.

<p>The SWI-Prolog website (<a class="url" href="http:www.swi-prolog.org">http:www.swi-prolog.org</a>) 
is written in Prolog and integrates PlDoc to provide a comprehensive 
searchable
<a class="url" href="http://www.swi-prolog.org/pldoc/index.html">online 
manual</a>.
</div>

<h1><a name="document-contents">Table of Contents</a></h1>

<div class="toc">
<div class="toc-h2"><a class="sec" href="#sec:1"><span class="sec-nr">1</span> <span class="sec-title">Introduction</span></a></div>
<div class="toc-h2"><a class="sec" href="#sec:2"><span class="sec-nr">2</span> <span class="sec-title">Overview</span></a></div>
<div class="toc-h2"><a class="sec" href="#sec:3"><span class="sec-nr">3</span> <span class="sec-title">Structured 
comments</span></a></div>
<div class="toc-h2"><a class="sec" href="#sec:4"><span class="sec-nr">4</span> <span class="sec-title">File 
(module) comments</span></a></div>
<div class="toc-h2"><a class="sec" href="#sec:5"><span class="sec-nr">5</span> <span class="sec-title">Type 
and mode declarations</span></a></div>
<div class="toc-h2"><a class="sec" href="#sec:6"><span class="sec-nr">6</span> <span class="sec-title">Tags: <code>@</code>param, 
etc.</span></a></div>
<div class="toc-h2"><a class="sec" href="#sec:7"><span class="sec-nr">7</span> <span class="sec-title">Wiki 
notation</span></a></div>
<div class="toc-h3"><a class="sec" href="#sec:7.1"><span class="sec-nr">7.1</span> <span class="sec-title">Structuring 
conventions</span></a></div>
<div class="toc-h3"><a class="sec" href="#sec:7.2"><span class="sec-nr">7.2</span> <span class="sec-title">Text 
markup: fonts and links</span></a></div>
<div class="toc-h3"><a class="sec" href="#sec:7.3"><span class="sec-nr">7.3</span> <span class="sec-title">Images</span></a></div>
<div class="toc-h2"><a class="sec" href="#sec:8"><span class="sec-nr">8</span> <span class="sec-title">Directory 
indices</span></a></div>
<div class="toc-h2"><a class="sec" href="#sec:9"><span class="sec-nr">9</span> <span class="sec-title">Documentation 
files</span></a></div>
<div class="toc-h2"><a class="sec" href="#sec:10"><span class="sec-nr">10</span> <span class="sec-title">Running 
the documentation system</span></a></div>
<div class="toc-h3"><a class="sec" href="#sec:10.1"><span class="sec-nr">10.1</span> <span class="sec-title">During 
development</span></a></div>
<div class="toc-h3"><a class="sec" href="#sec:10.2"><span class="sec-nr">10.2</span> <span class="sec-title">As 
a manual server</span></a></div>
<div class="toc-h3"><a class="sec" href="#sec:10.3"><span class="sec-nr">10.3</span> <span class="sec-title">Using 
the browser interface</span></a></div>
<div class="toc-h4"><a class="sec" href="#sec:10.3.1"><span class="sec-nr">10.3.1</span> <span class="sec-title">Searching</span></a></div>
<div class="toc-h4"><a class="sec" href="#sec:10.3.2"><span class="sec-nr">10.3.2</span> <span class="sec-title">Views</span></a></div>
<div class="toc-h4"><a class="sec" href="#sec:10.3.3"><span class="sec-nr">10.3.3</span> <span class="sec-title">Editing</span></a></div>
<div class="toc-h3"><a class="sec" href="#sec:10.4"><span class="sec-nr">10.4</span> <span class="sec-title">library(doc_files): 
Create stand-alone documentation files</span></a></div>
<div class="toc-h3"><a class="sec" href="#sec:10.5"><span class="sec-nr">10.5</span> <span class="sec-title">Including 
PlDoc in a LaTeX document</span></a></div>
<div class="toc-h4"><a class="sec" href="#sec:10.5.1"><span class="sec-nr">10.5.1</span> <span class="sec-title">Predicate 
reference for the LaTeX backend</span></a></div>
<div class="toc-h2"><a class="sec" href="#sec:11"><span class="sec-nr">11</span> <span class="sec-title">Motivation 
of choices</span></a></div>
</div>

<p>

<h2><a name="sec:1"><span class="sec-nr">1</span> <span class="sec-title">Introduction</span></a></h2>

<p>When developing Prolog source that has to be maintained for a longer 
period or is developed by a ---possibly distributed--- team some basic 
quality mechanisms need to be adopted. A shared and well designed 
codingstyle <cite><a class="cite" href="#DBLP:dblpjournals/tplp/CovingtonBOWP12">Covington <em>et 
al.</em>, 2012</a></cite> is one of them. In addition, documentation of 
source-files and their primary interfaces as well as a testing framework 
must be established.

<p>In our view, hitherto existing documentation and testing frameworks 
fell short realising the basic needs in a lightweight and easy to adopt 
system. To encourage consistent style, well commented code and 
test-assisted development, we make sure that

<p>
<ul compact>
<li>The documentation and testing framework requires a minimum of work 
and learning.
<li>The framework is immediately rewarding to the individual programmer 
as well as the team,
</ul>

<p>First, we describe the documentation system we developed for 
SWI-Prolog. In <a class="sec" href="#sec:11">section 11</a> we motivate 
our main choices.

<h2><a name="sec:2"><span class="sec-nr">2</span> <span class="sec-title">Overview</span></a></h2>

<p>Like JavaDoc, the PlDoc infrastructure is based on <em>structured 
comments</em>. Using comments, no changes have to be made to Prolog to 
load the documented source. If the <code>library(pldoc)</code> library 
is loaded, Prolog will not only load the source, but also parse all 
structured comments. It processes the mode-declarations inside the 
comments and stores these as annotations in the Prolog database to 
support the test framework and other runtime and compiletime analysis 
tools that may be developed in the future.

<p>Documentation for all or some of the loaded files can be written to 
file in either HTML+CSS or LaTeX (see <a class="sec" href="#sec:10.5">section 
10.5</a>) format. Each source file is documented in a single file. In 
addition, the documentation generator will generate an index file that 
can be used as an index for a browser or input file for LaTeX for 
producing nicely typeset document.

<p>To support the developer, the documentation system can be asked to 
start a web-server that can be used to browse the documentation.

<h2><a name="sec:3"><span class="sec-nr">3</span> <span class="sec-title">Structured 
comments</span></a></h2>

<p>Structured comments come in two flavours, the line-comment (%) based 
one, seen mostly in the Prolog community and the block-comment (<code>/*</code>...<code>*/</code>) 
based one, commonly seen in the Java and C domain. As we cannot 
determine the argument-names, type and modes from following (predicate) 
code itself, we must supply this in the comment.<sup class="fn">1<span class="fn-text">See <a class="sec" href="#sec:11">section 
11</a>.</span></sup>. The overall structure of the comment therefore is:

<p>
<ul compact>
<li>Semi-formal type- and mode-description, see <a class="sec" href="#sec:5">section 
5</a>
<li>Wiki-style documentation body, see <a class="sec" href="#sec:7">section 
7</a>
<li>JavaDoc style tags (<code>@</code>keyword value, see <a class="sec" href="#sec:6">section 
6</a>)
</ul>

<p>Using the <code>/*</code>...<code>*/</code> style comment, the type 
and mode declarations start at the first non-blank line and are ended by 
a blank line. Using <code>%</code> line-comments, the declaration is 
ended by the first line that starts with a single %. E.g., the following 
two fragments are identical wrt. PlDoc. Skipping blank-lines in <code>/**</code> 
comments allows to start the comment on the second line.

<pre class="code">
%%      predicate(-Arg:type) is nondet
%       Predicate ...
</pre>

<pre class="code">
/**
 * predicate(-Arg:type) is nondet
 *
 * Predicate ...
 */
</pre>

<p>The JavaDoc style keyword list starts at the first line starting with 
@&lt;<var>word</var>&gt;.

<h2><a name="sec:4"><span class="sec-nr">4</span> <span class="sec-title">File 
(module) comments</span></a></h2>

<a name="sec:sectioncomments"></a>

<p>An important aspect is documentation of the file or module as a 
whole, explaining its design, purpose and relation to other modules. In 
JavaDoc this is the comment that preceeds the class definition. The 
Prolog equivalent would be to put the module comment in front of the 
module declaration. The module declaration itself however is an 
important index to the content of the file and is therefore best kept 
first.

<p>The general comment-structure for module comments is to use a type 
identifier between angled brackets, followed by the title of the 
section. Currently the only type provided is <code>module</code>. Other 
types may be added later.

<h3>Example</h3>

<pre class="code">
/** &lt;module&gt; Prolog documentation processor

This module processes structured comments and generates both formal
mode declarations from them as well as documentation in the form of
HTML or LaTeX.

@author Jan Wielemaker
@license GPL
*/
</pre>

<h2><a name="sec:5"><span class="sec-nr">5</span> <span class="sec-title">Type 
and mode declarations</span></a></h2>

<a name="sec:modes"></a>

<p>The type and mode declaration header consists of one or more Prolog 
terms. Each term describes a mode of the predicate. The syntax is 
informally described below:

<p>
<center>
<table border="2" frame="hsides" rules="groups">
<tr valign="top"><td>&lt;<var>modedef</var>&gt; </td><td align=right>::=</td><td>&lt;<var>head</var>&gt;['//'] 
'is' &lt;<var>determinism</var>&gt; </td></tr>
<tr valign="top"><td></td><td align=right>|</td><td>&lt;<var>head</var>&gt;['//'] </td></tr>
<tr valign="top"><td>&lt;<var>determinism</var>&gt; </td><td align=right>::=</td><td>'det' </td></tr>
<tr valign="top"><td></td><td align=right>|</td><td>'semidet' </td></tr>
<tr valign="top"><td></td><td align=right>|</td><td>'nondet' </td></tr>
<tr valign="top"><td></td><td align=right>|</td><td>'multi' </td></tr>
<tr valign="top"><td>&lt;<var>head</var>&gt; </td><td align=right>::=</td><td>&lt;<var>functor</var>&gt;'('&lt;argspec&gt; 
',' &lt;<var>argspec</var>&gt;')' </td></tr>
<tr valign="top"><td></td><td align=right>|</td><td>&lt;<var>functor</var>&gt; </td></tr>
<tr valign="top"><td>&lt;<var>argspec</var>&gt; </td><td align=right>::=</td><td>[&lt;<var>instantiation</var>&gt;]&lt;<var>argname</var>&gt;[':'&lt;type&gt;] </td></tr>
<tr valign="top"><td>&lt;<var>instantiation</var>&gt; </td><td align=right>::=</td><td>'+' <var>|</var> 
'-' <var>|</var> '?' <var>|</var> ':'
<var>|</var> '@' <var>|</var> '!' </td></tr>
<tr valign="top"><td>&lt;<var>type</var>&gt; </td><td align=right>::=</td><td>&lt;<var>term</var>&gt; </td></tr>
</table>
</center>

<p>The <em>determinism</em> values originate from Mercury. Predicates 
marked as <code>det</code> must succeed exactly once and not leave any 
choice-points. The <code>semidet</code> indicator is used for predicates 
that either fail or succeed deterministically. The <code>nondet</code> 
indicator is the most general one and implies no constraints on the 
number of times the predicate succeeds and whether or not it leaves 
choice-points on the last success. Finally, <code>multi</code> is as <code>nondet</code>, 
but demands the predicate to succeed at least one time. Informally,
<code>det</code> is used for deterministic transformations (e.g. arithmetic), <code>semidet</code> 
for tests, <code>nondet</code> and
<code>multi</code> for <em>generators</em>.

<p>Instantiation patterns are:

<p>
<center>
<table border="2" frame="hsides" rules="groups">
<tr valign="top"><td>+</td><td>Argument must be fully instantiated to a 
term that satisfies the type. </td></tr>
<tr valign="top"><td>-</td><td>Argument must be unbound. </td></tr>
<tr valign="top"><td>?</td><td>Argument must be bound to a <em>partial 
term</em> of the indicated type. Note that a variable is a partial term 
for any type. </td></tr>
<tr valign="top"><td>:</td><td>Argument is a meta-argument. Implies <code><code>+</code></code>. </td></tr>
<tr valign="top"><td>@</td><td>Argument is not further instantiated. </td></tr>
<tr valign="top"><td>!</td><td>Argument contains a mutable structure 
that may be modified using
<a name="idx:setarg3:1"></a><span class="pred-ext">setarg/3</span> or <a name="idx:nbsetarg3:2"></a><span class="pred-ext">nb_setarg/3</span>. </td></tr>
</table>
</center>

<p>In the current version types are represented by an arbitrary term 
without formal semantics. In future versions we may adopt a formal type 
system that allows for runtime verification and static type analysis
<cite><a class="cite" href="#DBLP:conf/cl/Hermenegildo00">Hermenegildo, 
2000</a>, <a class="cite" href="#DBLP:journals/ai/MycroftO84">Mycroft &amp; 
O'Keefe, 1984</a>, <a class="cite" href="#DBLP:conf/acsc/JefferyHS00">Jeffery <em>et 
al.</em>, 2000</a></cite>

<h3>Examples</h3>

<pre class="code">
%%      length(+List:list, -Length:int) is det.
%%      length(?List:list, -Length:int) is nondet.
%%      length(?List:list, +Length:int) is det.
%
%       True if List is a list of length Length.
%
%       @compat iso
</pre>

<h2><a name="sec:6"><span class="sec-nr">6</span> <span class="sec-title">Tags: <code>@</code>param, 
etc.</span></a></h2>

<a name="sec:tags"></a>

<p>Optionally, the description may be followed by one or more <em>tags</em>. 
Our tag convention is strongly based on the conventions of javaDoc. It 
is adviced to place tags in the order they are described below.

<dl class="latex">
<dt><b><code>@</code>param <i>Name Description</i></b></dt>
<dd class="defbody">
Defines the parameters. Each parameter has its own param tag. The first 
word is the name of the parameter. The remainder of the tag is the 
description. Parameter declarations must appear in the argument order 
used by the predicate.</dd>
<dt><b><code>@</code>throws <i>Term Description</i></b></dt>
<dd class="defbody">
Error condition. First Prolog term is the error term. Remainder is the 
description.</dd>
<dt><b><code>@</code>error <i>Error Description</i></b></dt>
<dd class="defbody">
As <code>@</code>throws, but the exception is embedded in <code>error(Error, 
Context)</code>.</dd>
<dt><b><code>@</code>author <i>Name</i></b></dt>
<dd class="defbody">
Author of the module or predicate. Multiple entries are used if there 
are multiple authors.</dd>
<dt><b><code>@</code>version <i>Version</i></b></dt>
<dd class="defbody">
Version of the module. There is no formal versioning system.</dd>
<dt><b><code>@</code>see <i>Text</i></b></dt>
<dd class="defbody">
Point to related material. Often contains links to predicates or files.</dd>
<dt><b><code>@</code>deprecated <i>Alternative</i></b></dt>
<dd class="defbody">
The predicate or module is deprecated. The description specifies what to 
use in new code.</dd>
<dt><b><code>@</code>compat <i>Standards and systems</i></b></dt>
<dd class="defbody">
When implementing libraries or externally defined interfaces this tag 
describes to which standard the interface is compatible.</dd>
<dt><b><code>@</code>copyright <i>Copyright holder</i></b></dt>
<dd class="defbody">
Copyright notice.</dd>
<dt><b><code>@</code>license <i>License conditions</i></b></dt>
<dd class="defbody">
License conditions that apply to the source.</dd>
<dt><b><code>@</code>bug <i>Bug description</i></b></dt>
<dd class="defbody">
Known problems with the interface or implementation.</dd>
<dt><b><code>@</code>tbd <i>Work to be done</i></b></dt>
<dd class="defbody">
Not yet realised behaviour that is enticipated in future versions.
</dd>
</dl>

<h2><a name="sec:7"><span class="sec-nr">7</span> <span class="sec-title">Wiki 
notation</span></a></h2>

<a name="sec:wiki"></a>

<p>Structured comments that provide part of the documentation are 
written in Wiki notation, based on <a class="url" href="http://www.twiki.org">TWiki</a>, 
with some Prolog specific additions.

<h3><a name="sec:7.1"><span class="sec-nr">7.1</span> <span class="sec-title">Structuring 
conventions</span></a></h3>

<dl class="latex">
<dt><b>Paragraphs</b></dt>
<dd>
Paragraphs are seperated by a blank line. Paragraphs that are indented 
in the source-code <em>after</em> normalising the left-margin are also 
indented in the output. Indentation is realised in the HTML backend 
using a <code>blockquote</code> element and in LaTeX using the
<code>quote</code> environment. Finally, if the initial indentation is 
16 or more, the paragraph is <i>centered</i>.</dd>
<dt><b>General lists</b></dt>
<dd>
The wiki knows three types of lists: <em>bullet lists</em> (HTML
<code>ul</code>), <em>numbered lists</em> (HTML <code>ol</code>) and
<em>description lists</em> (HTML <code>dl</code>). Each list environment 
is headed by an empty line and each list-item has a special symbol at 
the start, followed by a space. Each subsequent item must be indented at 
exactly the same column. Lists may be nested by starting a new list at a 
higher level of indentation. The list prefixes are:

<p>
<center>
<table border="0" frame="void" rules="groups">
<tr valign="top"><td><tt>*</tt></td><td>Bulleted list item </td></tr>
<tr valign="top"><td><tt>1.</tt></td><td>Numbered list item. Any number 
from 1..9 is allowed, which allows for proper numbering in the source. 
Actual numbers in the HTML or LaTeX however are re-generated, starting 
at 1. </td></tr>
<tr valign="top"><td><tt>$ Title : Item</tt></td><td>Description list 
item.</td></tr>
</table>
</center>
</dd>
<dt><b>Term lists</b></dt>
<dd>
Especially when describing option lists or different accepted types, it 
is common to describe the behaviour on different terms. Such lists must 
be written as below. &lt;<var>Term1</var>&gt;, etc. must be valid Prolog 
terms and end in the newline. The Wiki adds <code>' . '</code> to the 
text and reads it using the operator definitions also used to read the 
mode terms. See <a class="sec" href="#sec:5">section 5</a>.

<pre class="code">
   * Term1
     Description
   * Term2
     Description
</pre>

</dd>
<dt><b>Predicate description lists</b></dt>
<dd>
Especially for processing Wiki files, the Wiki notation allows for 
including the description of a predicate `in-line', where the 
documentation is extracted from a loaded source file. For example:

<pre class="code">
The following predicates are considered Prolog's prime list processing
primitives:

    * [[member/2]]
    * [[append/3]]
</pre>

</dd>
<dt><b>Tables</b></dt>
<dd>
The Wiki provides only for limited support for tables. A table-row is 
started by a <code><code>|</code></code> sign and the cells are 
separated by the same character. The last cell must be ended with <code><code>|</code></code>. 
Multiple lines that parse into a table-row together form a table. 
Example:

<pre class="code">
        | Algorithm    | Time (sec) |
        | Depth first  | 1.0        |
        | Breath first | 0.7        |
        | A*           | 0.3        |
</pre>

</dd>
<dt><b>Section Headers</b></dt>
<dd>
Section headers are creates using one of the constructs below taken from 
TWiki. Section headers are normally not used in the source-code, but can 
be useful inside README and TODO files. See <a class="sec" href="#sec:8">section 
8</a>.

<pre class="code">
---+ Section level 1
---++ Section level 2
---+++ Section level 3
---++++ Section level 4
</pre>

</dd>
<dt><b>Code (verbatim)</b></dt>
<dd>
Verbatim is embedded between lines containing only <code>==</code>, as 
shown in the example below. The indentation of the <code>==</code> must 
match and the indentation of the verbatim text is reduced by the 
indentation of the <code>==</code> marks.

<pre class="code">
        ==
        small(X) :-
                X &lt; 5.
        ==
</pre>

</dd>
<dt><b>Rules</b></dt>
<dd>
A single line starting at column 1 with at least two dashes is 
translated into a horizontal rule over the page. For example:

<pre class="code">
--
</pre>

<p></dd>
</dl>

<h3><a name="sec:7.2"><span class="sec-nr">7.2</span> <span class="sec-title">Text 
markup: fonts and links</span></a></h3>

<p>Wiki text markup to realise fonts is mostly based on old plaintext 
conventions in Usenet and E-mail. We added Prolog specific conventions 
to this. For font changing code, the opening symbol must be followed 
immediately by a word and the closing one must immediately follow a 
word.

<p>As code comments frequently contain symbols such as <code>=</code>, 
we ---in contrast to normal Wiki conventions--- do font font-switches 
only if a single word is surrounded by <code>=</code>, <code>*</code> or <code>_</code>. 
Longer sequences must be created using additional <code><code>|</code></code>:

<pre class="code">
PceEmacs can be set as default editor using
=|set_prolog_flag(editor, pce_emacs)|=
</pre>

<p><a class="tab" href="#tab:fonts">Table 1</a> shows the font-changing 
constructions, while
<a class="tab" href="#tab:links">table 2</a> shows the constructs for 
creating links.

<p>
<center>
<table border="2" frame="box" rules="groups">
<tr valign="top"><td><tt>*bold*</tt></td><td>Typset text in <b>bold</b>. 
Content must be a single word. </td></tr>
<tr valign="top"><td><tt>*|bold|*</tt></td><td>Typset text in <b>bold</b>. 
Content can be long. </td></tr>
<tr valign="top"><td><tt>_emphasize_</tt></td><td>Typset text as <em>emphasize</em>. 
Content must be a single word. </td></tr>
<tr valign="top"><td><tt>_|emphasize|_</tt></td><td>Typset text as <em>emphasize</em>. 
Content can be long. </td></tr>
<tr valign="top"><td><tt>=code=</tt></td><td>Typset text <tt>fixed</tt> 
font. Content must be a single word. </td></tr>
<tr valign="top"><td><tt>=|code|=</tt></td><td>Typset text <tt>fixed</tt> 
font. Content can be long. </td></tr>
<tr valign="top"><td><tt>Word</tt></td><td>Capitalised words that appear 
as argument-name are written in <var>Italic</var> </td></tr>
</table>
</center>
<table align="center" width="75%"><tr><td>
<b>Table 1 : </b>Wiki constructs to change the font
</table>
<a name="tab:fonts"></a>

<p>
<center>
<table border="2" frame="box" rules="groups">
<tr valign="top"><td><tt>name/arity</tt></td><td>Create a link to a 
predicate </td></tr>
<tr valign="top"><td><tt>name//arity</tt></td><td>Create a link to a DCG 
rule </td></tr>
<tr valign="top"><td><tt>name.ext</tt></td><td>If &lt;<var>name</var>&gt;.&lt;<var>ext</var>&gt; 
is the name of an existing file and &lt;<var>ext</var>&gt; is one of <code>.pl</code>, <code>.txt</code>,
<code>.png</code>, <code>.gif</code>, <code>.jpeg</code>,
<code>.jpg</code> or <code>.svg</code>, create a link to the file. </td></tr>
<tr valign="top"><td><tt>prot<code>://</code>url</tt></td><td>If &lt;<var>prot</var>&gt; 
is one of <code>http</code> or
<code>ftp</code>, create a link. </td></tr>
<tr valign="top"><td><tt><code><code>&lt;</code></code>url<code><code>&gt;</code></code> </tt></td><td>Create 
a hyperlink to URL. This construct supports the <a name="idx:expandurlpath2:3"></a><span class="pred-ext">expand_url_path/2</span> 
using the construct
&lt;<var>alias</var>&gt;:&lt;<var>local</var>&gt;. &lt;<var>local</var>&gt; 
can be empty. </td></tr>
<tr valign="top"><td><tt><code>[[</code>label<code>][</code>link<code>]]</code> </tt></td><td>Create 
a link using the given &lt;<var>label</var>&gt;. Label can be text or a 
reference to an image file. Additional arguments can be supplied as
<code><code>;</code></code>&lt;<var>name</var>&gt;=<code>"</code>&lt;<var>value</var>&gt;<code>"</code>. 
More arguments are separated by commas. &lt;<var>link</var>&gt; must be 
a filename as above or a url. </td></tr>
</table>
</center>
<table align="center" width="75%"><tr><td>
<b>Table 2 : </b>Wiki constructs that create links
</table>
<a name="tab:links"></a>

<h3><a name="sec:7.3"><span class="sec-nr">7.3</span> <span class="sec-title">Images</span></a></h3>

<p>Images can be included in the documentation by referencing an image 
file using one of the extensions <code>.gif</code>, <code>.png</code>,
<code>.jpeg</code>, <code>.jpg</code> or <code>.svg</code>.<sup class="fn">2<span class="fn-text">SVG 
images are included using the <code>object</code> element. This is 
supported by many modern browsers. When using IE, one needs at least 
IE9.</span></sup> By default this creates a link to the image file that 
must be visited to see the image. Inline images can be created by 
enclosing the filename in double square brackets. For example

<pre class="code">
The [[open.png]] icon is used open an existing file.
</pre>

<h2><a name="sec:8"><span class="sec-nr">8</span> <span class="sec-title">Directory 
indices</span></a></h2>

<a name="sec:dirindex"></a>

<p>A directory index consists of the contents of the file <code>README</code> 
(or <code>README.TXT</code>), followed by a table holding all currently 
loaded source-files that appear below the given directory (i.e. traversal 
is
<em>recursive</em>) and for each file a list of public predicates and 
their descriptive summary. Finally, if a file <code>TODO</code> or <code>TODO.TXT</code> 
exists, its content is added at the end of the directory index.

<h2><a name="sec:9"><span class="sec-nr">9</span> <span class="sec-title">Documentation 
files</span></a></h2>

<a name="sec:wikifiles"></a>

<p>Sometimes it is desirable to document aspects of a package outside 
the source-files. For this reason the system creates a link to files 
using the extension <code>.txt</code>. The referenced file is processed 
as Wiki source. The two fragments below illustrate the relation between 
an
<code>.pl</code> file and a <code>.txt</code> file.

<pre class="code">
%%      read_setup(+File, -Setup) is det.
%
%       Read application setup information from File.  The details
%       on setup are described in setup.txt.
</pre>

<pre class="code">
---+ Application setup data

If a file =|.myapprc|= exists in the user's home directory the
application will process this data using setup.pl. ...
</pre>

<h2><a name="sec:10"><span class="sec-nr">10</span> <span class="sec-title">Running 
the documentation system</span></a></h2>

<a name="sec:running"></a>

<h3><a name="sec:10.1"><span class="sec-nr">10.1</span> <span class="sec-title">During 
development</span></a></h3>

<p>To support the developer with an up-to-date version of the 
documentation of both the application under development and the system 
libraries the developer can start an HTTP documentation server using the 
command
<code>doc_server(?Port)</code>. A good way to deploy PlDoc for program 
development is to write a file called e.g., <code>debug.pl</code> that 
sets up the preferred development environment and loads your program. 
below is an example <code>debug.pl</code> that starts PlDoc and prints 
strings as text before loading the remainder of your program.

<pre class="code">
:- doc_server(4000).    % Start PlDoc at port 4000
:- portray_text(true).  % Enable portray of strings

:- [load].              % load your program
</pre>

<dl class="latex">
<dt class="pubdef"><a name="doc_collect/1"><strong>doc_collect</strong>(<var>+Bool</var>)</a></dt>
<dd class="defbody">
Enable/disable collecting structured comments into the Prolog database. 
See <a name="idx:docserver1:4"></a><a class="pred" href="#doc_server/1">doc_server/1</a> 
or <a name="idx:docbrowser0:5"></a><a class="pred" href="#doc_browser/0">doc_browser/0</a> 
for the normal way to deploy the server in your application. All these 
predicates must be called
<em>before</em> loading your program.</dd>
<dt class="pubdef"><a name="doc_server/1"><strong>doc_server</strong>(<var>?Port</var>)</a></dt>
<dd class="defbody">
Start documentation server at <var>Port</var>. Same as
<code>doc_server(Port, [allow(localhost), workers(1)])</code>. This 
predicate must be called <em>before</em> loading the program for which 
you consult the documentation. It calls <a name="idx:doccollect1:6"></a><a class="pred" href="#doc_collect/1">doc_collect/1</a> 
to start collecting documentation while (re-)loading your program.</dd>
<dt class="pubdef"><a name="doc_server/2"><strong>doc_server</strong>(<var>?Port, 
+Options</var>)</a></dt>
<dd class="defbody">
Start documentation server at <var>Port</var> using <var>Options</var>. 
Provided options are:

<dl class="latex">
<dt><strong>root</strong>(<var>+Path</var>)</dt>
<dd class="defbody">
Defines the root of all locations served by the HTTP server. Default is <code><code>/</code></code>. <var>Path</var> 
must be an absolute URL location, starting with <code><code>/</code></code> 
and ending in <code><code>/</code></code>. Intented for public services 
behind a reverse proxy. See documentation of the HTTP package for 
details on using reverse proxies.</dd>
<dt><strong>edit</strong>(<var>+Bool</var>)</dt>
<dd class="defbody">
If <code>false</code>, do not allow editing, even if the connection 
comes from localhost. Intended together with the <code>root</code> 
option to make pldoc available from behind a reverse proxy. See the HTTP 
package for configuring a Prolog server behind an <a class="url" href="http://httpd.apache.org/docs/1.3/mod/mod_proxy.html">Apache 
reverse proxy</a>.</dd>
<dt><strong>allow</strong>(<var>+HostOrIP</var>)</dt>
<dd class="defbody">
Allow connections from <var>HostOrIP</var>. If <var>Host</var> is an 
atom starting with a '.', suffix matching is preformed. I.e. <code>allow('.uva.nl')</code> 
grants access to all machines in this domain. IP addresses are specified 
using the library(socket) <a name="idx:ip4:7"></a><span class="pred-ext">ip/4</span> 
term. I.e. to allow access from the 10.0.0.X domain, specify
<code>allow(ip(10,0,0,_))</code>.</dd>
<dt><strong>deny</strong>(<var>+HostOrIP</var>)</dt>
<dd class="defbody">
Deny access from the given location. Matching is equal to the
<code>allow</code> option.
</dd>
</dl>

<p>Access is granted iff

<p>
<ul compact>
<li>Both <em>deny</em> and <em>allow</em> match
<li><em>allow</em> exists and matches
<li><em>allow</em> does not exist and <em>deny</em> does not match.
</ul>
</dd>
<dt class="pubdef"><a name="doc_browser/0"><strong>doc_browser</strong></a></dt>
<dd class="defbody">
Open the user's default browser on the running documentation server. 
Fails if no server is running.</dd>
<dt class="pubdef"><a name="doc_browser/1"><strong>doc_browser</strong>(<var>+Spec</var>)</a></dt>
<dd class="defbody">
Open the user's default browser on the specified page. <var>Spec</var> 
is handled similar to <a name="idx:edit1:8"></a><span class="pred-ext">edit/1</span>, 
resolving anything that relates somehow to the given specification and 
ask the user to select.<sup class="fn">bug<span class="fn-text">This 
flexibility is not yet implemented</span></sup>.
</dd>
</dl>

<h3><a name="sec:10.2"><span class="sec-nr">10.2</span> <span class="sec-title">As 
a manual server</span></a></h3>

<a name="sec:manserver"></a>

<p>The library <code>library(pldoc/doc_library)</code> defines <a name="idx:docloadlibrary0:9"></a><a class="pred" href="#doc_load_library/0">doc_load_library/0</a> 
to load the entire library.

<dl class="latex">
<dt class="pubdef"><a name="doc_load_library/0"><strong>doc_load_library</strong></a></dt>
<dd class="defbody">
Load all library files. This is intended to set up a local documentation 
server. A typical scenario, making the server available at port 4000 of 
the hosting machine from all locations in a domain is given below.

<pre class="code">
:- doc_server(4000,
              [ allow('.my.org')
              ]).
:- use_module(library(pldoc/doc_library)).
:- doc_load_library.
</pre>

<p>Example code can be found in <code>$PLBASE/doc/packages/examples/pldoc</code>.
</dd>
</dl>

<h3><a name="sec:10.3"><span class="sec-nr">10.3</span> <span class="sec-title">Using 
the browser interface</span></a></h3>

<a name="sec:browser"></a>

<p>The documentation system is normally accessed from a web-browser 
after starting the server using <a name="idx:docserver1:10"></a><a class="pred" href="#doc_server/1">doc_server/1</a>. 
This section briefly explains the user-interface provided from the 
browser.

<h4><a name="sec:10.3.1"><span class="sec-nr">10.3.1</span> <span class="sec-title">Searching</span></a></h4>

<p>The top-right of the screen provides a search-form. The search string 
typed is searched as a substring and case-insensitive. Multiple strings 
seperated by spaces search for the intersection. Searching for objects 
that do not contain a string is written as <code><code>-</code></code>&lt;<var>string</var>&gt;. 
A search for adjacent strings is specified as <code>"</code>&lt;<var>string</var>&gt;<code>"</code>. 
Here are some examples:

<p>
<center>
<table border="2" frame="box" rules="groups">
<tr valign="top"><td><tt>load file</tt></td><td>Searches for all objects 
with the strings
<tt>load</tt> and <tt>file</tt>. </td></tr>
<tr valign="top"><td><tt>load -file</tt></td><td>Searches for objects 
with <tt>load</tt>, but
<em>without</em> <tt>file</tt>. </td></tr>
<tr valign="top"><td><tt>"load file"</tt></td><td>Searches for the 
string <tt>load file</tt>.</td></tr>
</table>
</center>

<p>The two radio-buttons below the search box can be used to limit the 
search. <b>All</b> searches both the application and manuals. Searching 
for <b>Summary</b> also implies <b>Name</b>.

<h4><a name="sec:10.3.2"><span class="sec-nr">10.3.2</span> <span class="sec-title">Views</span></a></h4>

<p>The web-browser supports several views, which we briefly summarise 
here:

<p>
<ul class="latex">
<li><i> Directory</i><br>
In directory-view mode, the contents of a directory holding Prolog 
source-files is shown file-by-file in a summary-table. In addition, the 
contents of the <code>README</code> and <code>TODO</code> files is 
given.

<p>
<li><i> Source File</i><br>
When showing a Prolog source-file it displays the module documentation 
from the <code>/** &lt;module ... */</code> comment and the public 
predicates with their full documentation. Using the <b>zoom</b> button 
the user can select to view both public and documentated private 
predicates. Using the <b>source</b> button, the system shows the source 
with syntax highlighting as in PceEmacs and formatted structured 
comments.<sup class="fn">3<span class="fn-text">This mode is still 
incomplete. It would be nice to add line-numbers and links to 
documentation and definitions in the sources.</span></sup>

<p>
<li><i> Predicate</i><br>
When selecting a predicate link the system presents a page with the 
documentation of the predicate. The navigation bar allows switching to 
the Source File if the documentation comes from source or the containing 
section if the documentation comes from a manual.

<p>
<li><i> Section</i><br>
Section from the manual. The navigation bars allows viewing the 
enclosing section (<em>Up</em>).
</ul>

<h4><a name="sec:10.3.3"><span class="sec-nr">10.3.3</span> <span class="sec-title">Editing</span></a></h4>

<p>If the browser is accessed from <code>localhost</code>, each object 
that is related to a known source-location has an edit icon at the right 
side. Clicking this calls <a name="idx:edit1:11"></a><span class="pred-ext">edit/1</span> 
on the object, calling the user's default editor in the file. To use the 
built-in PceEmacs editor, either set the Prolog flag <code>editor</code> 
to <code>pce_emacs</code> or run <code>?- emacs.</code> before clicking 
an edit button.

<p>Prolog source-files have a <em>reload</em> button attached. Clicking 
this reloads the source file if it was modified and refreshes the page. 
This supports a comfortable edit-view loop to maintain the source-code 
documentation.

<h3><a name="sec:10.4"><span class="sec-nr">10.4</span> <span class="sec-title">library(doc_files): 
Create stand-alone documentation files</span></a></h3>

<p><a name="sec:docfiles"></a>

<dl class="tags">
<dt class="tag">To be done</dt>
<dd>
Generate a predicate index?
</dd>
</dl>

<p>Create stand-alone documentation from a bundle of source-files. 
Typical use of the PlDoc package is to run it as a web-server from the 
project in progress, providing search and guaranteed consistency with 
the loaded version. Creating stand-alone files as provided by this file 
can be useful for printing or distribution.

<dl class="latex">
<dt class="pubdef"><a name="doc_save/2"><strong>doc_save</strong>(<var>+FileOrDir, 
+Options</var>)</a></dt>
<dd class="defbody">
Save documentation for <var>FileOrDir</var> to file(s). <var>Options</var> 
include

<dl class="latex">
<dt><strong>format</strong>(<var>+Format</var>)</dt>
<dd class="defbody">
Currently only supports <code>html</code>.
</dd>
<dt><strong>doc_root</strong>(<var>+Dir</var>)</dt>
<dd class="defbody">
Save output to the given directory. Default is to save the documentation 
for a file in the same directory as the file and for a directory in a 
subdirectory <code>doc</code>.
</dd>
<dt><strong>title</strong>(<var>+Title</var>)</dt>
<dd class="defbody">
Title is an atom that provides the HTML title of the main (index) page. 
Only meaningful when generating documentation for a directory.
</dd>
<dt><strong>man_server</strong>(<var>+RootURL</var>)</dt>
<dd class="defbody">
Root of a manual server used for references to built-in predicates. 
Default is
<code>http://www.swi-prolog.org/pldoc/</code>
</dd>
<dt><strong>index_file</strong>(<var>+Base</var>)</dt>
<dd class="defbody">
Filename for directory indices. Default is <code>index</code>.
</dd>
<dt><strong>if</strong>(<var>Condition</var>)</dt>
<dd class="defbody">
What to do with files in a directory. <code>loaded</code> (default) only 
documents files loaded into the Prolog image. <code>true</code> 
documents all files.
</dd>
<dt><strong>recursive</strong>(<var>+Bool</var>)</dt>
<dd class="defbody">
If <code>true</code>, recurse into subdirectories.
</dd>
<dt><strong>css</strong>(<var>+Mode</var>)</dt>
<dd class="defbody">
If <code>copy</code>, copy the CSS file to created directories. Using <code>inline</code>, 
include the CSS file into the created files. Currently, only the default <code>copy</code> 
is supported.
</dd>
</dl>

<p>The typical use-case is to document the Prolog files that belong to a 
project in the current directory. To do this load the Prolog files and 
run the goal below. This creates a sub-directory <code>doc</code> with 
an index file <code>index.html</code>. It replicates the directory 
structure of the source directory, creating an HTML file for each Prolog 
file and an index file for each sub-directory. A copy of the required 
CSS and image resources is copied to the <code>doc</code> directory.

<pre class="code">
?- doc_save(., [recursive(true)]).
</pre>

</dd>
<dt class="pubdef"><a name="doc_pack/1"><strong>doc_pack</strong>(<var>+Pack</var>)</a></dt>
<dd class="defbody">
Generate stand-alone documentation for the package <var>Pack</var>. The 
documentation is generated in a directory <code>doc</code> inside the 
pack. The index page consists of the content of <code>readme</code> or
<code>readme.txt</code> in the main directory of the pack and an index 
of all files and their public predicates.
</dd>
</dl>

<h3><a name="sec:10.5"><span class="sec-nr">10.5</span> <span class="sec-title">Including 
PlDoc in a LaTeX document</span></a></h3>

<p><a name="sec:doclatex"></a>

<p>The LaTeX backend aims at producing quality paper documentation as 
well as integration of predicate description and Wiki files in LaTeX 
documents such as articles and technical reports. It is realised by the 
library <code>doc_latex.pl</code>.

<p>The best practice for using the LaTeX backend is yet to be 
established. For now we anticipate processing a Wiki document saved in a 
.txt file using <a class="pred" href="#doc_latex/3">doc_latex/3</a> to 
produce either a simple complete LaTeX document or a partial document 
that is included into the the main document using the LaTeX <code>\input</code> 
command. Typically, this is best established by writing a <i>Prolog 
Script</i> that generates the required LaTeX document and call this from 
a <i>Makefile</i>. We give a simple example from PlDoc, creating this 
section from the wiki-file <code>latex.txt</code> below.

<pre class="code">
:- use_module(library(doc_latex)).
:- [my_program].
</pre>

<p>We generate latex.tex from <code>latex.txt</code> using this Makefile 
fragment:

<pre class="code">
.SUFFIXES: .txt .tex

.txt.tex:
        pl -f script.pl -g "doc_latex('$*.txt','$*.tex',[stand_alone(false)]),halt" -t "halt(1)"
</pre>

<h4><a name="sec:10.5.1"><span class="sec-nr">10.5.1</span> <span class="sec-title">Predicate 
reference for the LaTeX backend</span></a></h4>

<p>High-level access is provided by <a class="pred" href="#doc_latex/3">doc_latex/3</a>, 
while more low level access is provided by the remaining predicates. 
Generated LaTeX depends on the style file <code>pldoc.sty</code>, which 
is a plain copy of <code>pl.sty</code> from the SWI-Prolog manual 
sources. The installation installs
<code>pldoc.sty</code> in the <code>pldoc</code> subdirectory of the 
Prolog manual.

<dl class="latex">
<dt class="pubdef"><span class="pred-tag">[det]</span><a name="doc_latex/3"><strong>doc_latex</strong>(<var>+Spec, 
+OutFile, +Options</var>)</a></dt>
<dd class="defbody">
Process one or more objects, writing the LaTeX output to
<var>OutFile</var>. <var>Spec</var> is one of:

<dl class="latex">
<dt><var><var>Name</var></var> <strong><code>/</code></strong> <var><var>Arity</var></var></dt>
<dd class="defbody">
Generate documentation for predicate
</dd>
<dt><var><var>Name</var></var> <strong><code>//</code></strong> <var><var>Arity</var></var></dt>
<dd class="defbody">
Generate documentation for DCG rule
</dd>
<dt><strong><var>File</var></strong></dt>
<dd class="defbody">
If File is a prolog file (as defined by
<span class="pred-ext">user:prolog_file_type/2</span>), process using
<a class="pred" href="#latex_for_file/3">latex_for_file/3</a>, otherwise 
process using
<a class="pred" href="#latex_for_wiki_file/3">latex_for_wiki_file/3</a>.
</dd>
</dl>

<p>Typically <var>Spec</var> is either a list of filenames or a list of 
predicate indicators. Defined options are:

<dl class="latex">
<dt><strong>stand_alone</strong>(<var>+Bool</var>)</dt>
<dd class="defbody">
If <code>true</code> (default), create a document that can be run 
through LaTeX. If <code>false</code>, produce a document to be included 
in another LaTeX document.
</dd>
<dt><strong>public_only</strong>(<var>+Bool</var>)</dt>
<dd class="defbody">
If <code>true</code> (default), only emit documentation for exported 
predicates.
</dd>
<dt><strong>section_level</strong>(<var>+Level</var>)</dt>
<dd class="defbody">
Outermost section level produced. Level is the name of a LaTeX section 
command. Default is <code>section</code>.
</dd>
<dt><strong>summary</strong>(<var>+File</var>)</dt>
<dd class="defbody">
Write summary declarations to the named File.
</dd>
</dl>

</dd>
<dt class="pubdef"><span class="pred-tag">[det]</span><a name="latex_for_file/3"><strong>latex_for_file</strong>(<var>+File, 
+Out, +Options</var>)</a></dt>
<dd class="defbody">
Generate a LaTeX description of all commented predicates in
<var>File</var>, writing the LaTeX text to the stream <var>Out</var>. 
Supports the options <code>stand_alone</code>, <code>public_only</code> 
and <code>section_level</code>. See <a class="pred" href="#doc_latex/3">doc_latex/3</a> 
for a description of the options.</dd>
<dt class="pubdef"><span class="pred-tag">[det]</span><a name="latex_for_wiki_file/3"><strong>latex_for_wiki_file</strong>(<var>+File, 
+Out, +Options</var>)</a></dt>
<dd class="defbody">
Write a LaTeX translation of a Wiki file to the steam <var>Out</var>. 
Supports the options <code>stand_alone</code>, <code>public_only</code> 
and
<code>section_level</code>. See <a class="pred" href="#doc_latex/3">doc_latex/3</a> 
for a description of the options.</dd>
<dt class="pubdef"><span class="pred-tag">[det]</span><a name="latex_for_predicates/3"><strong>latex_for_predicates</strong>(<var>+PI:list, 
+Out, +Options</var>)</a></dt>
<dd class="defbody">
Generate LaTeX for a list of predicate indicators. This does
<b>not</b> produce the <code>\</code>begin{description}...<code>\</code>end{description} 
environment, just a plain list of <code>\</code>predicate, etc. 
statements. The current implementation ignores <var>Options</var>.
</dd>
</dl>

<h2><a name="sec:11"><span class="sec-nr">11</span> <span class="sec-title">Motivation 
of choices</span></a></h2>

<a name="sec:motivation"></a>

<p>Literal programming is an established field. The TeX source is one of 
the first and best known examples of this approach, where input files 
are a mixture of TeX and PASCAL source. External tools are used to 
untangle the common source and process one branch to produce the 
documentation, while the other is compiled to produce the program.

<p>A program and its documentation consists of various different parts:

<p>
<ul compact>
<li>The program text itself. This is the minimum that must be handed to 
the compiler to create an executable (module).
<li>Meta information about the program: author, modifications, license, 
etc.
<li>Documentation about the overall structure and purpose of the source.
<li>Description of the interface: public predicates, their types, modes 
and whether or not they are deterministic as wel as an informative text 
on each public predicate.
<li>Description of key private predicates necessary to understand how 
the public interface is realised.
</ul>

<h3>Structured comments or directives</h3>

<p>Comments can be added through Prolog directives, a route taken by 
Ciao Prolog with lpdoc <cite><a class="cite" href="#DBLP:conf/cl/Hermenegildo00">Hermenegildo, 
2000</a></cite> and Logtalk
<cite><a class="cite" href="#pmoura03">Moura, 2003</a></cite>. We feel 
structured comments are a better alternative for the following reasons:

<p>
<ul class="latex">
<li>Prolog programmers are used to writing comments as Prolog comments.
<li>Using Prolog strings requires unnatural escape sequences for string 
quotes and long literal values tend to result in hard to find 
quote-mismatches. Python uses comments in long strings, fixing this 
problem using a three double quotes to open and close long comments.
<li>Comments should not look like code, as that makes it more difficult 
to find the actual code.
</ul>

<p>We are aware that the above problems can be dealt with using 
syntax-aware editors. Only a few editors are sufficiently powerful to 
support this correctly though and we do not expect the required advanced 
modes to be widely available. Using comments we do not need to force 
users into using a particular editor.

<h3>Wiki or HTML</h3>

<p>JavaDoc uses HTML as markup inside the structured comments. Although 
HTML is more widely known than ---for example--- LaTeX or TeXinfo, we 
think the Wiki approach is sufficiently widely known today. Using text 
with minimal layout conventions taken largely from plaintext newsnet and 
E-mail, Wiki input is much easier to read in the source-file than HTML 
without syntax support from an editor.

<h3>Types and modes</h3>

<a name="sec:motivation:modes"></a>

<p>Types and modes are not a formal part of the Prolog language. 
Nevertheless, their role goes beyond pure documentation. The test-system 
can use information about non-determinism to validate that deterministic 
calls are indeed deterministic. Type information can be used to analyse 
coverage from the test-suite, to generate runtime type verification or 
to perform static type-analysis. We have chosen to use a structured 
comment with formal syntax for the following reasons:

<p>
<ul class="latex">
<li>As a comment, they stay together with the comment block of a 
predicate. We feel it is best to keep documentation as close as possible 
to the source.
<li>As we parse them separately, we can pick up argument names and 
create a readable syntax without introducing possibly conflicting 
operators.
<li>As a comment they do not introduce incompatibilities with other 
Prolog systems.
</ul>

<h3>Few requirements</h3>

<p>SWI-Prolog aims at platform independency. We want tools to rely as 
much as possible on Prolog itself. Therefore, the entire infrastructure 
is written in Prolog. Output as HTML is suitable for browsing and not 
very high quality printing on virtually all platforms. Output to LaTeX 
requires more infrastructure for processing and allows for producing 
high-quality PDF documents.

<h2>Bibliography</h2>

<dl class="bib">
<dt class="bib"><a name="DBLP:dblpjournals/tplp/CovingtonBOWP12"><strong>Covington <em>et 
al.</em>, 2012</strong></a></dt>
<dd class="bib">
Michael&nbsp;A. Covington, Roberto Bagnara, Richard&nbsp;A. O'Keefe, Jan 
Wielemaker, Simon Price, and Simon Price. Coding guidelines for prolog 
coding guidelines for prolog. pages 889--927, 2012.</dd>
<dt class="bib"><a name="DBLP:conf/cl/Hermenegildo00"><strong>Hermenegildo, 
2000</strong></a></dt>
<dd class="bib">
Manuel&nbsp;V. Hermenegildo. A documentation generator for (c)lp 
systems. In John&nbsp;W. Lloyd, Ver&oacute;nica Dahl, Ulrich Furbach, 
Manfred Kerber, Kung-Kiu Lau, Catuscia Palamidessi, Lu&\iacute;s&nbsp;Moniz 
Pereira, Yehoshua Sagiv, and Peter&nbsp;J. Stuckey, editors, <em>Computational 
Logic</em>, volume 1861 of <em>Lecture Notes in Computer Science</em>, 
pages 1345--1361. Springer, 2000.</dd>
<dt class="bib"><a name="DBLP:conf/acsc/JefferyHS00"><strong>Jeffery <em>et 
al.</em>, 2000</strong></a></dt>
<dd class="bib">
David Jeffery, Fergus Henderson, and Zoltan Somogyi. Type classes in 
mercury. In <em>ACSC</em>, pages 128--135. IEEE Computer Society, 2000.</dd>
<dt class="bib"><a name="pmoura03"><strong>Moura, 2003</strong></a></dt>
<dd class="bib">
Paulo Moura.
<em>Logtalk - Design of an Object-Oriented Logic Programming Language</em>. 
PhD thesis, Department of Informatics, University of Beira Interior, 
Portugal, September 2003.</dd>
<dt class="bib"><a name="DBLP:journals/ai/MycroftO84"><strong>Mycroft &amp; 
O'Keefe, 1984</strong></a></dt>
<dd class="bib">
Alan Mycroft and Richard&nbsp;A. O'Keefe. A polymorphic type system for 
prolog.
<em>Artif. Intell.</em>, 23(3):295--307, 1984.

<p></dd>
</dl>

<h1><a name="document-index">Index</a></h1>

<dl>
<dt class="index-sep">?</dt>
<dt><a class="idx" href="#doc_browser/0">doc_browser/0</a></dt>
<dd>
<a class="idx" href="#idx:docbrowser0:5">10.1</a></dd>
<dt><a class="idx" href="#doc_browser/1">doc_browser/1</a></dt>
<dt><a class="idx" href="#doc_collect/1">doc_collect/1</a></dt>
<dd>
<a class="idx" href="#idx:doccollect1:6">10.1</a></dd>
<dt><a class="idx" href="#doc_latex/3">doc_latex/3</a></dt>
<dt><a class="idx" href="#doc_load_library/0">doc_load_library/0</a></dt>
<dd>
<a class="idx" href="#idx:docloadlibrary0:9">10.2</a></dd>
<dt><a class="idx" href="#doc_pack/1">doc_pack/1</a></dt>
<dt><a class="idx" href="#doc_save/2">doc_save/2</a></dt>
<dt><a class="idx" href="#doc_server/1">doc_server/1</a></dt>
<dd>
<a class="idx" href="#idx:docserver1:4">10.1</a> <a class="idx" href="#idx:docserver1:10">10.3</a></dd>
<dt><a class="idx" href="#doc_server/2">doc_server/2</a></dt>
<dt>edit/1</dt>
<dd>
<a class="idx" href="#idx:edit1:8">10.1</a> <a class="idx" href="#idx:edit1:11">10.3.3</a></dd>
<dt>expand_url_path/2</dt>
<dd>
<a class="idx" href="#idx:expandurlpath2:3">7.2</a></dd>
<dt>ip/4</dt>
<dd>
<a class="idx" href="#idx:ip4:7">10.1</a></dd>
<dt><a class="idx" href="#latex_for_file/3">latex_for_file/3</a></dt>
<dt><a class="idx" href="#latex_for_predicates/3">latex_for_predicates/3</a></dt>
<dt><a class="idx" href="#latex_for_wiki_file/3">latex_for_wiki_file/3</a></dt>
<dt>nb_setarg/3</dt>
<dd>
<a class="idx" href="#idx:nbsetarg3:2">5</a></dd>
<dt>setarg/3</dt>
<dd>
<a class="idx" href="#idx:setarg3:1">5</a></dd>
</dl>

</body></html>